const repository=new Repository("Cliente");let busqueda,buscar=n=>{waiting(),repository.httpGet("BuscarClientes",n).then(n=>{n.correct?($(".info__transactions tbody").empty(),n.data[0]?($.each(n.data,function(t,i){$(".info__transactions tbody").append("<tr>"+`<td>${t+1}</td>`+`<td>${i.clienteID}</td>`+`<td>${i.nombreCompleto}</td>`+`<td>${moment(n.data.fechaRegistro).format("YYYY-MM-DD")}</td>`+`<td><button type="button" data-cliente="${i.clienteID}">VER DETALLE</button></td>`+"<\/tr>")}),swal.close()):info("No se encontraron resultados","No se encontró ningún cliente que coincida con los datos proporcionados")):requestError(n.message)}).catch(n=>{serviceError(`${n.status} - ${n.statusText}`)})};$(function(){moment.tz.setDefault("America/Mexico_City");clearInputs();$("#numeroCliente").mask("0#");$("#nombre, #apellidoPaterno, #apellidoMaterno").mask("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",{byPassKeys:[8,32],translation:{A:{pattern:/^[a-zA-Z\s]$/}}});$('input[type="radio"]').on("change",function(){clearInputs();$(".info__search div").hide();busqueda=$(this).data("busqueda");$(`#${busqueda}`).show();$("#buscar").prop("disabled",!1)});$("#buscar").on("click",function(){if(busqueda==="b_1")if($("#numeroCliente").val()){let n={clienteID:$("#numeroCliente").val()};buscar(n)}else info("No se puede realizar la búsqueda","Debes ingresar el número del cliente");else if($("#nombre").val()||$("#apellidoPaterno").val()||$("#apellidoMaterno").val()){let n={nombre:$("#nombre").val(),apellidoPaterno:$("#apellidoPaterno").val(),apellidoMaterno:$("#apellidoMaterno").val()};buscar(n)}else info("No se puede realizar la búsqueda","Debes ingresar una valor en almenos uno de los campos")});$(".info__transactions tbody").on("click","button",function(){window.location.href=`/Cliente/Detalles/${parseInt($(this).data("cliente"))}`})});